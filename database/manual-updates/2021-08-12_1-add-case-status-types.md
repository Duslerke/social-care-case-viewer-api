# Add case status types DB tables

## The problem we're trying to solve

We need to add three new tables to store case status types and their default data

## Justification for doing a manual update

We don't have database migrations set up for the API.

## The plan

1. Run SQL statements to create the tables in Staging
2. Run SQL statements to create the tables in Production

## Link to Jira ticket

https://hackney.atlassian.net/browse/SCT-962

## SQL statement(s)

```sql
CREATE TABLE IF NOT EXISTS dbo.sccv_case_status_type (
  id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  name varchar(3),
  description varchar(256)
);

CREATE TABLE IF NOT EXISTS dbo.sccv_case_status_subtype (
  id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  fk_case_status_type_id bigint,
  name varchar(3),
  description varchar(256)
);

CREATE TABLE IF NOT EXISTS dbo.sccv_person_case_status (
  id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  fk_person_id bigint,
  fk_case_status_type_id bigint,
  fk_case_status_subtype_id bigint,
  start_date timestamp without time zone NOT NULL,
  end_date timestamp without time zone,
  notes text,
  sccv_created_at timestamp,
  sccv_created_by varchar(300),
  sccv_last_modified_at timestamp,
  sccv_last_modified_by varchar(300),
  PRIMARY KEY( id )
);

INSERT INTO dbo.sccv_case_status_type(name, description) VALUES ('CIN', 'Child in need');

INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N1', 'Abuse or neglect');
INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N2', 'Childâ€™s disability');
INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N3', 'Parental disability or illness');
INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N4', 'Family in acute stress');
INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N5', 'Family dysfunction');
INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N6', 'Socially unacceptable behaviour');
INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N7', 'Low income');
INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N8', 'Absent parenting');
INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N9', 'Cases other than children in need');
INSERT INTO dbo.sccv_case_status_subtype(fk_case_status_type_id, name, description) VALUES ((select id from dbo.sccv_case_status_type where name ilike 'CIN'), 'N0', 'Not stated');

```


## Useful resources

N/A
